<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head></h:head>
<f:metadata>
	<!-- TODO add onViewingProfileAndLoad -->
	<!-- <f:viewAction action="#{candidateBean.onViewingProfileLoad}" /> -->
	<f:viewAction action="#{candidateBean.redirectLogin}" />
</f:metadata>
<ui:include src="/resources/Template/Header.xhtml" />
<body>

	<div class="compny-profile">
		<!-- SUB Banner -->

		<div class="profile-bnr">

			<div class="container">

				<!-- User Iinfo -->

				<div class="user-info">

					<h1>
						#{candidateBean.viewingCompany.company_Name} Inc. <a
							data-toggle="tooltip" data-placement="top" title=""
							data-original-title="Verified Member"><img
							src="images/icon-ver.png" alt="" /></a>
					</h1>


					<p>
						#{candidateBean.viewingCompany.company_Website} (<a href="#.">map</a>
						/ <a href="#.">street</a>)
					</p>

					<!-- Social Icon -->

					<div class="social-links">
						<a href="#."><i class="fa fa-facebook" /></a> <a href="#."><i
							class="fa fa-twitter" /></a> <a href="#."><i
							class="fa fa-google" /></a> <a href="#."><i
							class="fa fa-linkedin" /></a>
					</div>

					<!-- Stars -->

					<ul class="row">

						<li class="col-sm-6">

							<div class="stars">
								<i class="fa fa-star" /> <i class="fa fa-star" /> <i
									class="fa fa-star" /> <i class="fa fa-star" /> <i
									class="fa fa-star" /> <span>(06)</span>
							</div>
						</li>

						<li class="col-sm-6">

							<p>
								<i class="fa fa-bookmark-o" /> 28 Bookmarks
							</p>
						</li>
					</ul>

					<!-- Followers -->

				
				</div>


				<c:set var="isSubbed" value="false" />
				<c:forEach items="#{candidateBean.LOGGEDIN_CANDIDATE.subscriptions}"
					var="sub">
					<c:if
						test="${sub.companyId == candidateBean.viewingCompany.companyId}">
						<c:set var="isSubbed" value="true" />
					</c:if>
				</c:forEach>

				<!-- Top Riht Button -->

				<div class="right-top-bnr">

					<div class="connect">
						<c:if test="${isSubbed==false}">
							<h:form>
								<h:commandLink action="#{candidateBean.subscribe()}">
									<i class="fa fa-user-plus" /> Subscribe
							</h:commandLink>
							</h:form>
						</c:if>
						<c:if test="${isSubbed==true}">
							<h:form>
								<h:commandLink disbaled="true"
									action="#{candidateBean.unsubscribe()}">
									<i class="fa fa-user-plus" /> Unsubscribe
							</h:commandLink>
							</h:form>
						</c:if>

						<a href="#."><i class="fa fa-share-alt" /> Share</a>

						<div class="bt-ns">
							<a href="#."><i class="fa fa-bookmark-o" /> </a> <a href="#."><i
								class="fa fa-envelope-o" /> </a> <a href="#."><i
								class="fa fa-exclamation" /> </a>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal POPUP -->

			<div class="modal fade" id="myModal" tabindex="-1" role="dialog">

				<div class="modal-dialog" role="document">

					<div class="modal-content">

						<div class="container">

							<h6>
								<a class="close" href="#." data-dismiss="modal"
									aria-label="Close"><span aria-hidden="true">Ã—</span></a> Send
								Message
							</h6>

							<!-- Forms -->
							<form action="#">

								<ul class="row">

									<li class="col-xs-6"><input type="text"
										placeholder="First Name " /></li>

									<li class="col-xs-6"><input type="text"
										placeholder="Last Name" /></li>

									<li class="col-xs-6"><input type="text"
										placeholder="Country" /></li>

									<li class="col-xs-6"><input type="text"
										placeholder="Email" /></li>

									<li class="col-xs-12"><textarea placeholder="Your Message"></textarea>
									</li>

									<li class="col-xs-12">
										<button class="btn btn-primary">Send message</button>
									</li>
								</ul>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Profile Company Content -->

		<div class="profile-company-content main-user" data-bg-color="f5f5f5">

			<div class="container">

				<div class="row">

					<!-- Nav Tabs -->

					<div class="col-md-12 ">

						<ul class="nav nav-tabs">

							<li class="active"><a data-toggle="tab" href="#profile"
								aria-expanded="true">Profile</a></li>

							<li class=""><a data-toggle="tab" href="#jobs"
								aria-expanded="false">Jobs</a></li>

							<li class=""><a data-toggle="tab" href="#subscribers"
								aria-expanded="false">Subscribers</a></li>

						</ul>
					</div>

					<!-- SIDE BAR -->

					<div class="col-md-4">

						<!-- Company Information -->

						<div class="sidebar">

							<h5 class="main-title">Company Information</h5>

							<div class="sidebar-thumbnail">
								<img src="images/company-thumb.jpg" alt="" />
							</div>

							<div class="sidebar-information">

								<ul class="single-category">

									<li class="row">

										<h6 class="title col-xs-6">Name</h6> <span
										class="subtitle col-xs-6">#{candidateBean.viewingCompany.company_Name}</span>
									</li>

									<li class="row">

										<h6 class="title col-xs-6">Email</h6> <span
										class="subtitle col-xs-6">#{candidateBean.viewingCompany.company_Email}</span>
									</li>

									<li class="row">

										<h6 class="title col-xs-6">Number of Employees</h6> <span
										class="subtitle col-xs-6">#{candidateBean.viewingCompany.numberOfEmployees}</span>
									</li>

									<li class="row">

										<h6 class="title col-xs-6">Number</h6> <span
										class="subtitle col-xs-6">#{candidateBean.viewingCompany.company_Number}</span>
									</li>

									<li class="row">

										<h6 class="title col-xs-6">Website</h6> <span
										class="subtitle col-xs-6">#{candidateBean.viewingCompany.company_Website}</span>
									</li>
								</ul>
							</div>
						</div>


					</div>

					<!-- Tab Content -->

					<div class="col-md-8">

						<div class="tab-content">

							<!-- PROFILE -->

							<div id="profile" class="tab-pane fade active in">

								<div class="profile-main">

									<h3>About the Company</h3>

									<div class="profile-in">

										#{candidateBean.viewingCompany.company_Description}</div>
								</div>

							</div>

							<!-- Jobs -->

							<div id="jobs" class="tab-pane fade">

								<div class="header-listing">

									<h6>Sort by</h6>

									<div class="custom-select-box">
										<select name="order"
											class="custom-select select2-hidden-accessible" tabindex="-1"
											aria-hidden="true">

											<option value="0">Most popular</option>

											<option value="1">The latest</option>

											<option value="2">The best rating</option>
										</select><span
											class="select2 select2-container select2-container--default"
											dir="ltr" style="width: 100px;"><span
											class="selection"><span
												class="select2-selection select2-selection--single"
												role="combobox" aria-autocomplete="list"
												aria-haspopup="true" aria-expanded="false" tabindex="0"
												aria-labelledby="select2-order-hi-container"><span
													class="select2-selection__rendered"
													id="select2-order-hi-container" title="Most popular">Most
														popular</span><span class="select2-selection__arrow"
													role="presentation"><b role="presentation" /></span></span></span><span
											class="dropdown-wrapper" aria-hidden="true" /></span>
									</div>

									<ul class="listing-views">

										<li class="active"><a href="#"><i class="fa fa-list" /></a></li>

										<li><a href="#"><i class="fa fa-th" /></a></li>

										<li><a href="#"><i class="fa fa-th-large" /></a></li>
									</ul>
								</div>

								<div class="listing listing-1">

									<div class="listing-section">
										<c:forEach
											items="#{candidateBean.viewingCompany.offers.toArray()}"
											var="job">

											<div class="listing-ver-3">

												<div class="listing-heading">

													<h5>#{job.offer_Title}</h5>

													<ul class="bookmark list-inline">

														<li><a href="#"><i class="fa fa-bookmark" /></a></li>

														<li><a href="#"><i class="fa fa-eye" /></a></li>

														<li><a href="#"><i class="fa fa-share" /></a></li>
													</ul>
												</div>

												<div class="listing-inner">

													<div class="listing-content">


														<span class="location"> <i class="fa fa-map-marker" />
															#{candidateBean.viewingCompany.company_Website}
														</span> <span class="type-work full-time"> Full Time </span>

														<p>#{job.offer_description}</p>

														<h6 class="title-tags">Skills required:</h6>

														<ul class="tags list-inline">

															<li><a href="#">Javascript</a></li>

															<li><a href="#">Wordpress</a></li>

															<li><a href="#">Presta</a></li>

															<li><a href="#">Sass</a></li>
														</ul>
														<c:set var="isApplied" value="false" />
														<c:set var="theapp" value="-1" />
														<c:forEach
															items="#{candidateBean.LOGGEDIN_CANDIDATE.applications}"
															var="app">
															<c:if test="${job.offerId == app.offer.offerId}">
																<c:set var="isApplied" value="true" />
																<c:set var="theapp" value="${app.applicationId}" />
															</c:if>
														</c:forEach>

														<c:if test="${isApplied==false}">
															<h:form>
																<h:commandButton class="btn btn-transparent-primary"
																	id="btn" value="Apply"
																	action="#{candidateBean.applyForAJob(job.offerId)}" />
															</h:form>
														</c:if>
														<c:if test="${isApplied==true}">
															<h:form>
																<button class="btn btn-transparent-primary"
																	disabled="true">ALREADY APPLIED</button>
																<hr></hr>
																<h:commandButton class="btn btn-transparent-primary"
																	value="Cancel Application"
																	action="#{candidateBean.cancelApplication(theapp,job.offerId)}" />
															</h:form>
														</c:if>
													</div>
												</div>

												<div class="listing-tabs">

													<ul>

														<li><a href="#"><i class="fa fa-envelope" />
																#{candidateBean.viewingCompany.company_Email}</a></li>

														<li><a href="#"><i class="fa fa-phone" />
																#{candidateBean.viewingCompany.company_Number}</a></li>

														<li><a href="#"><i class="fa fa-globe" />
																#{candidateBean.viewingCompany.company_Website}</a></li>

														<li class="share-button"><a href="#"><i
																class="fa dollar-sign" /> Salary: #{job.offre_Salary}</a>

															<div class="contact-share">

																<ul>

																	<li><a href="#"><i
																			class="fa fa-facebook-square" /></a></li>

																	<li><a href="#"><i
																			class="fa fa-twitter-square" /></a></li>

																	<li><a href="#"><i
																			class="fa fa-google-plus-square" /></a></li>

																	<li><a href="#"><i
																			class="fa fa-linkedin-square" /></a></li>
																</ul>
															</div></li>
													</ul>
												</div>
											</div>
										</c:forEach>


									</div>
								</div>
							</div>
							<div id="subscribers" class="tab-pane fade">

								<div class="profile-main">

									<h3>Subscribers</h3>

									<div class="profile-in">

										<div class="folow-persons">

											<ul>

												<!-- MEMBER -->
												<c:forEach
													items="#{candidateBean.viewingCompany.subscribers}"
													var="sub">
													<li>

														<div class="row">

															<div class="col-xs-4">
																<!-- Check Box -->

																<div class="checkbox">
																	<input id="checkbox1-1" class="styled" type="checkbox" />
																	<label for="checkbox1-1" />
																</div>
																<!-- Name -->

																<div class="fol-name">

																	<div class="avatar">
																		<h:graphicImage
													value="https://localhost:44341/Content/Uploads/#{sub.imageUrl}"
													alt="#{candidateBean.LOGGEDIN_CANDIDATE.imageUrl}"></h:graphicImage>
																	</div>

																	<h6>#{sub.firstName} #{sub.lastName}</h6>
																	<span>Web Developer</span>
																</div>
															</div>
															<!-- Location -->

															<div class="col-xs-3 n-p-r n-p-l">
																<span>#{sub.address}</span>
															</div>
															<!-- Network -->

															<div class="col-xs-3 n-p-r">
																 <span>#{candidateBean.getNumberOfFollowers(sub.candidateId)} Following</span>
															</div>

														</div>
													</li>
												</c:forEach>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<ui:include src="/resources/Template/Footer.xhtml" />
</body>
</html>